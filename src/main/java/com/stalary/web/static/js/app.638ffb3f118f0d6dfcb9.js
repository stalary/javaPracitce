webpackJsonp([1],{14:function(e,t){},140:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"default",function(){return b});var a=n(15),r=n.n(a),i=n(3),s=n.n(i),o=n(6),u=n.n(o),c=n(5),l=n.n(c),d=n(4),p=n.n(d),m=n(0),h=n.n(m),f=n(1),y=n.n(f),v=n(57),k=n(31),g=n(551),E=(n(254),n(529)),b=function(e){function t(){return s()(this,t),l()(this,(t.__proto__||r()(t)).apply(this,arguments))}return p()(t,e),u()(t,[{key:"render",value:function(){var e=this.props.store;return this.route||(this.route=g.a),h.a.createElement(v.Provider,{store:e},h.a.createElement("div",null,h.a.createElement(k.a,null,h.a.createElement(E.a,null,this.route)),null))}}]),t}(m.Component);b.propTypes={store:y.a.object.isRequired}},145:function(e,t,n){"use strict";function a(e){if(null!==e&&"object"===(void 0===e?"undefined":u()(e)))return e.promise&&"function"==typeof e.promise.then}function r(){for(var e=[],t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];for(var r=0;r<n.length;r++)!function(t){var a=n[t];if(a){var r=void 0===a?"undefined":u()(a);"string"===r||"number"===r?e.push(a):"object"===r&&e.push(s()(a).filter(function(e){return a[e]}))}}(r);return e.join(" ")}t.a=a,t.b=r;var i=n(68),s=n.n(i),o=n(22),u=n.n(o)},169:function(e,t){},252:function(e,t,n){"use strict";function a(e){return{type:c.z,payload:{promise:n.i(u.k)(e).then(function(e){return e.data})}}}function r(e){return{type:c.A,payload:{promise:n.i(u.l)(e).then(function(e){return e.data})}}}function i(e,t){return{type:c.B,payload:{promise:n.i(u.m)(e).then(function(e){return o()({},e.data,{inx:t})})}}}Object.defineProperty(t,"__esModule",{value:!0}),t.fetchQuizzes=a,t.fetchQuizzesForStudent=r,t.fetchQuizzesReadAll=i;var s=n(2),o=n.n(s),u=n(83),c=n(36)},253:function(e,t){e.exports={name:"admin",role:"ADMIN",uid:1}},254:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=n.n(a),i=n(138),s=(n.n(i),n(1087)),o=n.n(s),u=n(1078),c=n.n(u);t.default=n.i(i.createDevTools)(r.a.createElement(c.a,{toggleVisibilityKey:"ctrl-h",changePositionKey:"ctrl-q"},r.a.createElement(o.a,null)))},255:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(51),r=n(545),i=n(547),s=n(546),o=n(549),u=n(550),c=n(548),l=n.i(a.c)({auth:r.a,menu:i.a,questions:o.a,filter:s.a,quiz:u.a,pick:c.a});t.default=l},284:function(e,t){},36:function(e,t,n){"use strict";n.d(t,"o",function(){return a}),n.d(t,"t",function(){return r}),n.d(t,"n",function(){return i}),n.d(t,"k",function(){return s}),n.d(t,"p",function(){return o}),n.d(t,"h",function(){return u}),n.d(t,"q",function(){return c}),n.d(t,"i",function(){return l}),n.d(t,"s",function(){return d}),n.d(t,"d",function(){return p}),n.d(t,"r",function(){return m}),n.d(t,"j",function(){return h}),n.d(t,"l",function(){return f}),n.d(t,"u",function(){return y}),n.d(t,"m",function(){return v}),n.d(t,"b",function(){return k}),n.d(t,"v",function(){return g}),n.d(t,"e",function(){return E}),n.d(t,"w",function(){return b}),n.d(t,"z",function(){return I}),n.d(t,"f",function(){return w}),n.d(t,"A",function(){return _}),n.d(t,"c",function(){return S}),n.d(t,"B",function(){return q}),n.d(t,"g",function(){return x}),n.d(t,"x",function(){return C}),n.d(t,"a",function(){return P}),n.d(t,"y",function(){return T});var a="FETCH_PROFILE_SUCCESS",r="GET_ALL_MENU",i="GET_ALL_MENU_SUCCESS",s="UPDATE_NAVPATH",o="FETCH_COURSES",u="FETCH_COURSES_SUCCESS",c="FETCH_HOMEWORK_LIST",l="FETCH_HOMEWORK_LIST_SUCCESS",d="FETCH_HOMEWORK_PREVIEW",p="FETCH_HOMEWORK_PREVIEW_SUCCESS",m="FETCH_BOOK_QUESTIONS",h="FETCH_BOOK_QUESTIONS_SUCCESS",f="SET_FILTER_PARAMS",y="FETCH_QUESTION",v="FETCH_QUESTION_PENDING",k="FETCH_QUESTION_SUCCESS",g="SUBMIT_CORRECT",E="SUBMIT_CORRECT_SUCCESS",b="SAVE_HOMEWORK",I="FETCH_QUIZZES",w="FETCH_QUIZZES_SUCCESS",_="FETCH_STUDENT_QUIZZES",S="FETCH_STUDENT_QUIZZES_SUCCESS",q="FETCH_QUIZZES_READ_ALL",x="FETCH_QUIZZES_READ_ALL_SUCCESS",C="FETCH_QUIZ_PREVIEW",P="FETCH_QUIZ_PREVIEW_SUCCESS",T="SAVE_QUIZ_CORRECT"},412:function(e,t,n){"use strict";function a(e){return l(u.default,e)}t.a=a;var r=n(51),i=n(1093),s=n.n(i),o=n(544),u=n(255),c=n(138),l=(c.persistState,n(254).default,n(255).default,n.i(r.a)(s.a,n.i(o.a)({promiseTypeSuffixes:["PENDING","SUCCESS","ERROR"]}))(r.b))},514:function(e,t,n){"use strict";function a(){return{type:"FETCH_PROFILE",payload:{promise:n.i(r.e)().then(function(e){return e.data})}}}t.a=a;var r=n(83)},515:function(e,t,n){"use strict";function a(e,t){return{type:s.k,payload:{data:e,key:t}}}function r(){return{type:s.t,payload:{promise:i.a.get("/menu")}}}t.b=a,t.a=r;var i=n(518),s=n(36)},516:function(e,t,n){"use strict";function a(e){return{type:d.u,payload:{promise:n.i(l.f)(e).then(function(e){return e.data})}}}function r(e,t){var n="quiz"===e.homeWork.type?l.g:l.h;return{type:d.v,payload:{promise:n(e).then(function(n){return 0!==n.data.code&&alert(n.data.description),t(),c()({},n.data,{inx:e.index})})}}}function i(e){return{type:d.w,payload:{promise:n.i(l.i)(e).then(function(e){return e.data})}}}function s(e){return{type:d.x,payload:{promise:n.i(l.j)(e).then(function(e){return e.data})}}}function o(e){return{type:d.y,payload:{promise:n.i(l.g)(e).then(function(e){return e.data})}}}Object.defineProperty(t,"__esModule",{value:!0}),t.fetchQuestions=a,t.submitCorrect=r,t.saveHomeworkCorrect=i,t.fetchQuizPreview=s,t.saveQuizCorrect=o;var u=n(2),c=n.n(u),l=n(83),d=n(36),p=n(82);n.d(t,"filterFetchHomeworkPreview",function(){return p.b});var m=n(252);n.d(t,"fetchQuizzesForStudent",function(){return m.fetchQuizzesForStudent})},517:function(e,t,n){"use strict";function a(e){return{type:c.u,payload:{promise:n.i(u.f)(e).then(function(e){return e.data})}}}function r(e,t){return{type:c.v,payload:{promise:n.i(u.h)({homeWork:e.homeWork,userId:e.userId,questionId:e.questionId,score:e.score,mark:e.mark}).then(function(t){return 0!==t.data.code&&alert(t.data.description),o()({},t.data,{inx:e.index})}).then(t)}}}function i(e){return{type:c.w,payload:{promise:n.i(u.i)(e).then(function(e){return e.data})}}}Object.defineProperty(t,"__esModule",{value:!0}),t.fetchQuestions=a,t.submitCorrect=r,t.saveHomeworkCorrect=i;var s=n(2),o=n.n(s),u=n(83),c=n(36),l=n(82);n.d(t,"filterFetchHomeworkPreview",function(){return l.b})},518:function(e,t,n){"use strict";var a=n(2),r=n.n(a),i=n(559),s=n.n(i),o=n(519),u=n(253),c=n(143),l=n(495),d=c.create(),p=c.create(),m=new l(p);m.onPut("/login").reply(function(e){var t=JSON.parse(e.data).data;return"admin"===t.user&&"123456"===t.password?[200,u]:[500,{message:"Incorrect user or password"}]}),m.onGet("/logout").reply(200,{}),m.onGet("/my").reply(200,n(253)),m.onGet("/menu").reply(200,n(520)),m.onGet("/randomuser").reply(function(e){return new s.a(function(t){d.get("https://randomuser.me/api",{params:r()({results:10},e.params),responseType:"json"}).then(function(e){t([200,e.data])}).catch(function(e){t([500,e])})})}),m.onGet("/my/course").reply(200,o.a),m.onGet("/homework/list").reply(function(e){return console.log(e),[200,o.b[e.params.courseId]]}),m.onGet("/homework/uncorrected/pick").reply(200,o.c),t.a=p},519:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return r}),n.d(t,"c",function(){return i});var a={courses:[{name:"课程I",courseId:0},{name:"课程II",courseId:1},{name:"课程III",courseId:2}]},r={0:[{type:"book",id:1},{type:"pan",id:2}],1:[{type:"apple",id:1},{type:"banana",id:2}],2:[{type:"book2",id:1},{type:"pan2",id:2}]},i={homeWork:{type:"book",id:1},userId:"user1",autoQuestions:[],correctedQuestions:[],uncorrectedQuestions:[{questionId:6669,imgAnswers:["https://oimageb7.ydstatic.com/image?id=-3922679276338147729&product=xue"],score:-1,mark:{images:[""],audio:"",text:""}},{questionId:6679,imgAnswers:["https://oimagea4.ydstatic.com/image?id=5505118708257137390&product=xue"],score:-1,mark:{images:[""],audio:"",text:""}}],questionMap:{6669:{},6679:{}}}},520:function(e,t){e.exports={menus:[{key:1,name:"作业管理",icon:"home",url:"/homework",child:[{name:"作业批改",key:11,url:"/homework/correct/filter"},{name:"测试批改",key:12,url:"/homework/quiz/list"},{name:"布置作业",key:13,url:"/homework/assign"},{name:"作业统计",key:14,url:"/homework/stats"}]}]}},521:function(e,t,n){"use strict";n.d(t,"a",function(){return Q});var a=n(45),r=(n.n(a),n(44)),i=n.n(r),s=n(224),o=(n.n(s),n(103)),u=n.n(o),c=n(242),l=(n.n(c),n(241)),d=n.n(l),p=n(59),m=(n.n(p),n(58)),h=n.n(m),f=n(226),y=(n.n(f),n(225)),v=n.n(y),k=n(15),g=n.n(k),E=n(3),b=n.n(E),I=n(6),w=n.n(I),_=n(5),S=n.n(_),q=n(4),x=n.n(q),C=n(0),P=n.n(C),T=n(1),R=n.n(T),N=n(293),H=(n.n(N),n(284)),z=(n.n(H),n(696)),A=n.n(z),Q=function(e){function t(e){b()(this,t);var n=S()(this,(t.__proto__||g()(t)).call(this,e));return n.savePic=n.savePic.bind(n),n.updateResult=n.updateResult.bind(n),n.state={score:n.props.score},n}return x()(t,e),w()(t,[{key:"componentWillMount",value:function(){this.image=new Image,this.image.setAttribute("crossOrigin","anonymous"),this.image.src=this.props.imageUrl}},{key:"componentDidMount",value:function(){window.MathJax&&window.MathJax.Hub.Queue(["Typeset",window.MathJax.Hub,"root"])}},{key:"componentDidUpdate",value:function(){this.image.src!==this.props.imageUrl&&(this.image.src=this.props.imageUrl,this.lc&&this.lc.clear())}},{key:"savePic",value:function(e){var t=this.props.submit;if(0===this.state.score)return alert("打分后才能提交");this.lc.getImage()?t(this.state.score,this.lc.getImage().toDataURL(),function(){e&&e()}):e&&e()}},{key:"updateResult",value:function(e){if("uncomplete"===e)return this.setState({score:-2});this.setState({score:e})}},{key:"render",value:function(){var e=this,t=this.props,a=t.next,r=t.question,s=t.title,o=t.history;t.answer;return P.a.createElement("div",{className:A.a.wrapper},P.a.createElement("div",{className:A.a.bgMask}),P.a.createElement("div",{className:A.a.panel},P.a.createElement(h.a,null,P.a.createElement(v.a,{span:6,className:A.a.containerQue},P.a.createElement("div",{className:A.a.title},"原题:"),P.a.createElement("div",{dangerouslySetInnerHTML:{__html:""+s}}),P.a.createElement("div",{className:A.a.title},"解析:"),r.answer?P.a.createElement("div",{dangerouslySetInnerHTML:{__html:""+r.answer}}):"无"),P.a.createElement(v.a,{span:18,className:A.a.canvasBox},P.a.createElement(N.LiterallyCanvasReactComponent,{onInit:function(t){e.lc=t},imageURLPrefix:"/img",primaryColor:"#f00",backgroundShapes:[n.i(N.createShape)("Image",{x:0,y:0,image:this.image})]}))),P.a.createElement(h.a,{type:"flex",align:"middle",justify:"center"},P.a.createElement("span",null,"回答打分情况(低于3分为错误)："),P.a.createElement(d.a,{value:this.state.score,onChange:this.updateResult}),P.a.createElement(u.a,{checked:-2===this.state.score,onChange:function(t){return e.updateResult(t?"uncomplete":0)}},"未完成")),P.a.createElement(h.a,{type:"flex",align:"middle",justify:"center",style:{marginTop:"15px"}},P.a.createElement(i.a,{onClick:function(){return o.goBack()}},"取消"),P.a.createElement(i.a,{type:"primary",style:{marginLeft:"15px"},onClick:function(){return e.savePic(function(){return o.goBack()})}},"保存并退出"),P.a.createElement(i.a,{type:"primary",style:{marginLeft:"15px"},onClick:function(){return e.savePic(a)}},"保存并进入下一题"))))}}]),t}(P.a.Component);Q.propTypes={back:R.a.func.isRequired,submit:R.a.func.isRequired,next:R.a.func.isRequired,score:R.a.number,imageUrl:R.a.string.isRequired},Q.defaultProps={score:0}},522:function(e,t,n){"use strict";n.d(t,"a",function(){return M});var a=n(45),r=(n.n(a),n(44)),i=n.n(r),s=n(242),o=(n.n(s),n(241)),u=n.n(o),c=n(59),l=(n.n(c),n(58)),d=n.n(l),p=n(8),m=n.n(p),h=n(555),f=n.n(h),y=n(15),v=n.n(y),k=n(3),g=n.n(k),E=n(6),b=n.n(E),I=n(5),w=n.n(I),_=n(4),S=n.n(_),q=n(0),x=n.n(q),C=n(1),P=n.n(C),T=n(293),R=(n.n(T),n(284)),N=(n.n(R),n(75)),H=n.n(N),z=n(145),A=n(531),Q=n(526),D=n(705),O=n.n(D),M=function(e){function t(e){g()(this,t);var n=w()(this,(t.__proto__||v()(t)).call(this,e));return n.bindFunction(),n.imageList=[],n.lc=[],n.canvasDataList=[],n.snapShot=new f.a,n.unsubscribe=null,n.state={score:-1,audio:"",lcshapes:-1,oralstatus:0},n}return S()(t,e),b()(t,[{key:"componentWillMount",value:function(){this.init(this.props)}},{key:"componentDidMount",value:function(){window.MathJax&&window.MathJax.Hub.Queue(["Typeset",window.MathJax.Hub,"root"])}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.curInx,a=t.curPicInx,r=t.curUserInx,i=t.question,s=e.curInx,o=e.curUserInx,u=e.question;n!==s&&r===o&&this.saveSnapshot(n,a),r!==o&&(this.snapShot=new f.a),n===s&&r===o&&i.userId===u.userId||this.init(e)}},{key:"componentWillUnmount",value:function(){this.unsubscribe()}},{key:"setRecording",value:function(e){this.setState({oralstatus:e})}},{key:"saveOrDelAudio",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";e?this.setState({audio:t}):this.setState({audio:""})}},{key:"bindFunction",value:function(){this.savePic=this.savePic.bind(this),this.clearPick=this.clearPick.bind(this),this.updateResult=this.updateResult.bind(this),this.saveOrDelAudio=this.saveOrDelAudio.bind(this),this.setRecording=this.setRecording.bind(this),this.gotoFilter=this.gotoFilter.bind(this),this.saveSnapshot=this.saveSnapshot.bind(this),this.haveRead=this.haveRead.bind(this),this.canClearPick=this.canClearPick.bind(this)}},{key:"init",value:function(e){var t=this,n=e.question;this.imageList=[];var a="";a=n.mark?n.mark.audio?n.mark.audio:"":n.audio&&n.audio?n.audio:"",this.setState({score:n.score,audio:a}),n.imgAnswers.map(function(e,a){t.imageList[a]=new Image,t.imageList[a].setAttribute("crossOrigin","anonymous"),t.imageList[a].src=n.score>0?n.imgCorrect[a]:n.imgAnswers[a]})}},{key:"clearPick",value:function(){var e=this.props,t=e.curPicInx,n=e.isHomeWork,a=e.question;this.lc[t]&&this.lc[t].clear(),this.setState({score:-3===a.score?-3:n?-1:-2})}},{key:"haveRead",value:function(e){var t=this,n=this.props,a=n.submit,r=n.question,i=this.state.audio;if(-2!==this.state.score)return alert("只有未批改的作业才能点击已阅，你是怎么做到的？");this.canvasDataList=this.lc.slice(),this.imageList.map(function(e,n){t.lc[n]&&t.lc[n].getImage()?t.canvasDataList[n]=t.lc[n].getImage().toDataURL():t.canvasDataList[n]=r.imgAnswers[n]}),this.setState({score:-3}),a(-3,this.canvasDataList,i,e)}},{key:"savePic",value:function(e){var t=this,n=this.props,a=n.submit,r=n.question,i=n.isHomeWork,s=this.state.audio;if(this.state.score===(i?-1:-2))return alert("打分后才能提交");(i||-1!==this.state.score)&&(this.canvasDataList=this.lc.slice(),this.imageList.map(function(e,n){t.lc[n]&&t.lc[n].getImage()?t.canvasDataList[n]=t.lc[n].getImage().toDataURL():t.canvasDataList[n]=r.imgAnswers[n]})),a(this.state.score,this.canvasDataList,s,e)}},{key:"updateResult",value:function(e){if("uncomplete"===e)return this.setState({score:-1});this.setState({score:e})}},{key:"canClearPick",value:function(){var e=this.state,t=e.lcshapes;return e.score>0||t>0}},{key:"gotoFilter",value:function(){var e=this.props,t=e.history,n=e.isHomeWork;if(this.state.score!==(n?-1:-2)){if(n){var a=this.props.SetFilterParams,r=H.a.parse(t.location.search);delete r.studentId,a(r)}t.push({pathname:n?"/homework/correct/filter":"/homework/quiz/list"})}}},{key:"saveSnapshot",value:function(e,t){this.lc[t]&&this.snapShot.set(e+"-"+t,this.lc[t].getSnapshot())}},{key:"renderImageList",value:function(){var e=this,t=this.props,a=t.question,r=t.curPicInx,i=t.changeInx,s=t.curInx;return x.a.createElement(d.a,{type:"flex",align:"middle",justify:"center",style:{marginTop:"15px"}},a.imgAnswers.map(function(t,a){return x.a.createElement("a",{className:n.i(z.b)(O.a.imgBox,m()({},O.a.imgBoxActive,r===a)),onClick:function(){e.saveSnapshot(s,r),i(a)},key:"imgAnswer-"+a},x.a.createElement("img",{src:t}))}))}},{key:"renderCanvasList",value:function(){var e=this,t=this.props,a=t.question,r=t.curPicInx,i=t.curInx;return x.a.createElement("div",{className:O.a.containerCanvas},a.imgAnswers.map(function(t,s){return r===s?x.a.createElement(T.LiterallyCanvasReactComponent,{key:""+a.questionId+a.userId+"-"+s,imageURLPrefix:"/img",primaryColor:"#f00",secondaryColor:"transparent",backgroundShapes:[n.i(T.createShape)("Image",{x:0,y:0,image:e.imageList[s]})],onInit:function(t){e.lc[s]=t,e.unsubscribe=e.lc[s].on("drawingChange",function(){e.setState({lcshapes:e.lc[s].shapes.length})}),e.snapShot.get(i+"-"+s)&&t.loadSnapshot(e.snapShot.get(i+"-"+s))}}):null}))}},{key:"renderAudioArea",value:function(){var e=this.state.audio;return e&&e.length>0?x.a.createElement(Q.a,{audioSrc:e,saveOrDelAudio:this.saveOrDelAudio}):x.a.createElement(A.a,{saveOrDelAudio:this.saveOrDelAudio,setRecording:this.setRecording})}},{key:"render",value:function(){var e=this,t=this.props,n=t.next,a=t.isHomeWork,r=this.state,s=r.oralstatus,o=r.lcshapes,c=r.score;return x.a.createElement("div",{className:O.a.wrapper},this.renderCanvasList(),x.a.createElement(d.a,{type:"flex",align:"middle",justify:"center"},x.a.createElement("span",null,"回答打分情况(低于3分为错误)："),x.a.createElement(u.a,{value:c,onChange:this.updateResult,disabled:!a&&-1===c})),this.renderImageList(),x.a.createElement(d.a,{type:"flex",align:"middle",justify:"center",style:{marginTop:"15px"}},a||-1!==c?this.renderAudioArea():null,x.a.createElement(i.a,{onClick:function(){return e.clearPick()},disabled:!this.canClearPick()},"清空批改痕迹"),a?null:x.a.createElement(i.a,{type:"primary",style:{marginLeft:"15px"},onClick:function(){return e.haveRead(n)},disabled:0!==s&&3!==s||-2!==c||o>0},"已阅"),x.a.createElement(i.a,{type:"primary",style:{marginLeft:"15px"},onClick:function(){return e.savePic(n)},disabled:0!==s&&3!==s},"保存并进入下一题"),x.a.createElement(i.a,{type:"primary",style:{marginLeft:"15px"},onClick:function(){return e.savePic(e.gotoFilter())},disabled:0!==s&&3!==s},"保存并退出")))}}]),t}(x.a.Component);M.propTypes={submit:P.a.func.isRequired,next:P.a.func.isRequired,changeInx:P.a.func,curPicInx:P.a.number.isRequired,curInx:P.a.number.isRequired,curUserInx:P.a.number.isRequired,question:P.a.object.isRequired,history:P.a.object.isRequired,SetFilterParams:P.a.func.isRequired,isHomeWork:P.a.bool.isRequired},M.defaultProps={changeInx:function(){}}},523:function(e,t,n){"use strict";n.d(t,"a",function(){return P});var a=n(59),r=(n.n(a),n(58)),i=n.n(r),s=n(468),o=(n.n(s),n(467)),u=n.n(o),c=n(8),l=n.n(c),d=n(15),p=n.n(d),m=n(3),h=n.n(m),f=n(6),y=n.n(f),v=n(5),k=n.n(v),g=n(4),E=n.n(g),b=n(0),I=n.n(b),w=n(1),_=n.n(w),S=n(31),q=n(145),x=n(706),C=n.n(x),P=function(e){function t(){return h()(this,t),k()(this,(t.__proto__||p()(t)).apply(this,arguments))}return E()(t,e),y()(t,[{key:"componentDidMount",value:function(){window.MathJax&&window.MathJax.Hub.Queue(["Typeset",window.MathJax.Hub,"root"]);var e=this.refs.currTabActive;e&&(e.parentNode.parentNode.scrollTop=e.offsetTop-50)}},{key:"render",value:function(){var e=this.props,t=e.question,a=e.title,r=e.isActive,s=e.inx,o=e.location,c=e.tabName,d=e.type;return I.a.createElement("div",{ref:r?"currTabActive":null},I.a.createElement(S.c,{to:"/pick/"+d+"/"+s+o.search,replace:!0,className:C.a.link},I.a.createElement("div",{className:n.i(q.b)(C.a.item,l()({},C.a.itemActive,r))},I.a.createElement(i.a,{type:"flex",align:"middle",justify:"space-between"},I.a.createElement("div",null,t.questionId,"."),"homework"===d?-1===t.score?I.a.createElement(u.a,{color:"volcano"},"未批改"):I.a.createElement(u.a,{color:"cyan"},"已批改"):-3===t.score?I.a.createElement(u.a,{color:"purple"},"已阅"):-2===t.score?I.a.createElement(u.a,{color:"volcano"},"未批改"):-1===t.score?I.a.createElement(u.a,{color:"orange"},"漏做"):I.a.createElement(u.a,{color:"cyan"},"已批改")),I.a.createElement("div",{dangerouslySetInnerHTML:{__html:c+": "+a}}))))}}]),t}(I.a.Component);P.propTypes={question:_.a.object.isRequired,tabName:_.a.string.isRequired,type:_.a.string.isRequired,location:_.a.object.isRequired,isActive:_.a.bool.isRequired,inx:_.a.number.isRequired,title:_.a.string.isRequired}},524:function(e,t,n){"use strict";n.d(t,"a",function(){return N});var a=n(226),r=(n.n(a),n(225)),i=n.n(r),s=n(59),o=(n.n(s),n(58)),u=n.n(o),c=n(45),l=(n.n(c),n(44)),d=n.n(l),p=n(15),m=n.n(p),h=n(3),f=n.n(h),y=n(6),v=n.n(y),k=n(5),g=n.n(k),E=n(4),b=n.n(E),I=n(0),w=n.n(I),_=n(1),S=n.n(_),q=n(31),x=n(1024),C=n.n(x),P=n(525),T=n(697),R=n.n(T),N=function(e){function t(){f()(this,t);var e=g()(this,(t.__proto__||m()(t)).call(this));return e.onAnswerClick=e.onAnswerClick.bind(e),e.renderEssayView=e.renderEssayView.bind(e),e.renderCompletionView=e.renderCompletionView.bind(e),e.state={answerOpen:!1},e}return b()(t,e),v()(t,[{key:"componentDidMount",value:function(){window.MathJax&&window.MathJax.Hub.Queue(["Typeset",window.MathJax.Hub,"root"])}},{key:"onAnswerClick",value:function(){this.setState({answerOpen:!0})}},{key:"renderEssayView",value:function(){var e=this,t=this.props,n=t.question,a=t.querystring,r=t.history,s=-1===n.score;return w.a.createElement("div",null,w.a.createElement(u.a,{type:"flex",justify:"space-between"},w.a.createElement(i.a,{span:11},w.a.createElement("p",null,"他的回答"),w.a.createElement("div",{className:R.a.answerImg,onClick:this.onAnswerClick},w.a.createElement("img",{src:n.imgAnswers[0],alt:""})),w.a.createElement(u.a,{type:"flex",align:"middle",justify:"center"},w.a.createElement(d.a,{type:"primary"},w.a.createElement(q.c,{to:{pathname:"/homework/correct/questions/"+n.index,search:a}},n.score<0?"批改":"重新批改")))),w.a.createElement("div",{className:R.a.line}),w.a.createElement(i.a,{span:11},w.a.createElement("p",null,"您的批改    ",w.a.createElement("strong",null,s?null:-2===n.score?"未完成":"得分:"+n.score)),w.a.createElement("div",{className:R.a.answerImg,onClick:function(){s||r.push({pathname:"/homework/correct/questions/"+n.index+"/remark",search:a})}},s?"您还未批改":w.a.createElement("img",{src:n.mark.images[0],alt:""})))),this.state.answerOpen&&w.a.createElement(C.a,{mainSrc:n.imgAnswers[0],onCloseRequest:function(){return e.setState({answerOpen:!1})}}))}},{key:"renderCompletionView",value:function(){var e=this.props,t=e.question,n=e.querystring,a=-1===t.score;return w.a.createElement("div",null,w.a.createElement("p",null,"您的批改    ",w.a.createElement("strong",null,a?"未批改":-2===t.score?"未完成":"得分:"+t.score)),w.a.createElement(d.a,{type:"primary",style:{marginTop:"15px"}},w.a.createElement(q.c,{to:{pathname:"/homework/correct/questions/"+t.index,search:n}},t.score<0?"批改":"重新批改")))}},{key:"render",value:function(){var e=this.props,t=e.question,n=e.title,a=t.type;return w.a.createElement(P.a,{title:t.questionId+". "+n},"completion"===a?this.renderCompletionView():this.renderEssayView())}}]),t}(w.a.Component);N.propTypes={question:S.a.object.isRequired,history:S.a.object.isRequired,querystring:S.a.string.isRequired}},525:function(e,t,n){"use strict";n.d(t,"a",function(){return I});var a=n(429),r=(n.n(a),n(428)),i=n.n(r),s=n(15),o=n.n(s),u=n(3),c=n.n(u),l=n(6),d=n.n(l),p=n(5),m=n.n(p),h=n(4),f=n.n(h),y=n(0),v=n.n(y),k=n(1),g=n.n(k),E=n(707),b=n.n(E),I=function(e){function t(){return c()(this,t),m()(this,(t.__proto__||o()(t)).apply(this,arguments))}return f()(t,e),d()(t,[{key:"render",value:function(){return v.a.createElement(i.a,{className:b.a.container,bordered:!0,bodyStyle:this.props.bodyStyle},v.a.createElement("h3",{className:b.a.title,dangerouslySetInnerHTML:{__html:this.props.title}}),this.props.children)}}]),t}(v.a.Component);I.propTypes={bodyStyle:g.a.object,title:g.a.string,children:g.a.object.isRequired},I.defaultProps={bodyStyle:{},title:""}},526:function(e,t,n){"use strict";n.d(t,"a",function(){return w});var a=n(15),r=n.n(a),i=n(3),s=n.n(i),o=n(6),u=n.n(o),c=n(5),l=n.n(c),d=n(4),p=n.n(d),m=n(45),h=(n.n(m),n(44)),f=n.n(h),y=n(0),v=n.n(y),k=n(1),g=n.n(k),E=n(698),b=n.n(E),I=f.a.Group,w=function(e){function t(e){s()(this,t);var n=l()(this,(t.__proto__||r()(t)).call(this,e));return n.state={listening:!1},n.listenAudioHandler=n.listenAudioHandler.bind(n),n.deleteAudioHandler=n.deleteAudioHandler.bind(n),n.audio=document.createElement("audio"),n}return p()(t,e),u()(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.audioSrc;t&&t.length>0&&(this.audio.src=t),this.audio.onended=function(){e.setState({listening:!1})},this.audio.onpause=function(){e.setState({listening:!1})}}},{key:"componentWillUnmount",value:function(){this.audio=null}},{key:"listenAudioHandler",value:function(){var e=this.state.listening,t=this.props.audioSrc;e?(this.audio.pause(),this.setState({listening:!1})):t&&t.length>0&&(this.audio.play(),this.setState({listening:!0}))}},{key:"deleteAudioHandler",value:function(){(0,this.props.saveOrDelAudio)(!1)}},{key:"render",value:function(){var e=this.state.listening;return v.a.createElement(I,{className:b.a.audio},v.a.createElement(f.a,{icon:e?"pause-circle-o":"sound",onClick:this.listenAudioHandler},"已点评录音"),v.a.createElement(f.a,{icon:"close-circle",type:"danger",onClick:this.deleteAudioHandler}))}}]),t}(v.a.Component);w.propTypes={audioSrc:g.a.string.isRequired,saveOrDelAudio:g.a.func.isRequired}},527:function(e,t,n){"use strict";n.d(t,"a",function(){return E});var a=n(15),r=n.n(a),i=n(3),s=n.n(i),o=n(6),u=n.n(o),c=n(5),l=n.n(c),d=n(4),p=n.n(d),m=n(106),h=(n.n(m),n(105)),f=n.n(h),y=n(0),v=n.n(y),k=n(700),g=(n.n(k),f.a.Footer),E=function(e){function t(){return s()(this,t),l()(this,(t.__proto__||r()(t)).apply(this,arguments))}return p()(t,e),u()(t,[{key:"render",value:function(){return v.a.createElement(g,{style:{textAlign:"center"}},"TR Admin ©2017 Created by Course")}}]),t}(v.a.Component)},528:function(e,t,n){"use strict";var a=n(59),r=(n.n(a),n(58)),i=n.n(r),s=n(15),o=n.n(s),u=n(3),c=n.n(u),l=n(6),d=n.n(l),p=n(5),m=n.n(p),h=n(4),f=n.n(h),y=n(106),v=(n.n(y),n(105)),k=n.n(v),g=n(0),E=n.n(g),b=n(1),I=n.n(b),w=n(31),_=n(708),S=n.n(_),q=k.a.Header,x=function(e){function t(){return c()(this,t),m()(this,(t.__proto__||o()(t)).apply(this,arguments))}return f()(t,e),d()(t,[{key:"render",value:function(){var e=this.props.profile,t="null"!==e.user?e.user:"";return E.a.createElement(q,{className:S.a.title},E.a.createElement(i.a,{type:"flex",justify:"space-between",align:"middle"},E.a.createElement("h1",null,t+"  欢迎进入精品课教师后台")))}}]),t}(E.a.Component);x.propTypes={profile:I.a.object.isRequired},t.a=n.i(w.b)(x)},529:function(e,t,n){"use strict";function a(e){return{actions:n.i(b.d)({fetchProfile:C.a},e),SetFilterParams:n.i(b.d)(P.a,e)}}var r=n(15),i=n.n(r),s=n(3),o=n.n(s),u=n(6),c=n.n(u),l=n(5),d=n.n(l),p=n(4),m=n.n(p),h=n(106),f=(n.n(h),n(105)),y=n.n(f),v=n(0),k=n.n(v),g=n(1),E=n.n(g),b=n(51),I=n(57),w=n(31),_=n(530),S=n(528),q=n(532),x=n(527),C=n(514),P=n(82),T=n(701),R=n.n(T),N=y.a.Content,H=function(e){function t(e){o()(this,t);var n=d()(this,(t.__proto__||i()(t)).call(this,e));return n.checkLogin=n.checkLogin.bind(n),n}return m()(t,e),c()(t,[{key:"componentWillMount",value:function(){this.props.actions.fetchProfile()}},{key:"checkLogin",value:function(){"null"===this.props.auth.user&&(window.location.href="https://ke.youdao.com/login?back_url="+window.location.href)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.auth,a=e.navpath,r=e.actions,i=e.history,s=e.SetFilterParams;return this.checkLogin(),k.a.createElement(y.a,{className:R.a["ant-layout"]},k.a.createElement(q.a,null),k.a.createElement(y.a,null,k.a.createElement(S.a,{profile:n,logout:r.logout}),k.a.createElement(N,null,k.a.createElement(_.a,{data:a,SetFilterParams:s,history:i}),k.a.createElement("div",{style:{minHeight:360}},t)),k.a.createElement(x.a,null)))}}]),t}(k.a.Component);H.propTypes={auth:E.a.object.isRequired,actions:E.a.object.isRequired,navpath:E.a.array.isRequired,children:E.a.object.isRequired,history:E.a.object.isRequired,SetFilterParams:E.a.func.isRequired};var z=function(e){var t=e.auth,n=e.menu;return{auth:t||null,navpath:n.navpath}};t.a=n.i(w.b)(n.i(I.connect)(z,a)(H))},530:function(e,t,n){"use strict";var a=n(424),r=(n.n(a),n(423)),i=n.n(r),s=n(2),o=n.n(s),u=n(15),c=n.n(u),l=n(3),d=n.n(l),p=n(6),m=n.n(p),h=n(5),f=n.n(h),y=n(4),v=n.n(y),k=n(0),g=n.n(k),E=n(1),b=n.n(E),I=n(31),w=n(75),_=n.n(w),S=n(702),q=n.n(S),x={data:[]},C={data:b.a.array,history:b.a.object.isRequired,SetFilterParams:b.a.func.isRequired},P=function(e){function t(){return d()(this,t),f()(this,(t.__proto__||c()(t)).apply(this,arguments))}return v()(t,e),m()(t,[{key:"render",value:function(){var e=this.props,t=e.data,n=e.SetFilterParams,a=e.history,r=o()({},a.location),s=r.pathname.startsWith("/pick/homework"),u=t.map(function(e){return g.a.createElement(i.a.Item,{key:"bc-"+e.key,onClick:function(){if("/homework/correct/filter"===e.url&&s){var t=_.a.parse(r.search);delete t.studentId,n(t)}else"/homework"===e.url&&n({})}},g.a.createElement(I.c,{to:e.url},e.name))});return g.a.createElement("div",{className:q.a.container},g.a.createElement(i.a,null,g.a.createElement(i.a.Item,{key:"bc-0"},g.a.createElement(I.c,{to:"/"},"首页")),u))}}]),t}(g.a.Component);P.propTypes=C,P.defaultProps=x,t.a=P},531:function(e,t,n){"use strict";n.d(t,"a",function(){return C});var a=n(15),r=n.n(a),i=n(3),s=n.n(i),o=n(6),u=n.n(o),c=n(5),l=n.n(c),d=n(4),p=n.n(d),m=n(45),h=(n.n(m),n(44)),f=n.n(h),y=n(0),v=n.n(y),k=n(1),g=n.n(k),E=n(699),b=n.n(E),I=f.a.Group,w={audio:!0},_=[],S=null,q=function(){if(navigator.mediaDevices.getUserMedia){var e=function(e){S=new MediaRecorder(e),S.start(),S.onpause=function(e){S.requestData()},S.ondataavailable=function(e){_.push(e.data),console.info("ondataavailable",_)}},t=function(e){console.error("The following error occured:"+e.name),"PermissionDeniedError"===e.name?alert("麦克风被禁止，请开启麦克风并重新刷新页面"):"NotFoundError"===e.name?alert("未找到麦克风设备，请确认并重新刷新页面"):alert("麦克风设备异常，请确认并重新刷新页面")};navigator.mediaDevices.getUserMedia(w).then(e,t)}else console.error("getUserMedia not supported on your browser!")},x=function(e){var t="",n="";switch(e){case 1:t="loading",n="录音中...";break;case 2:t="",n="继续录音";break;case 3:t="",n="重新录音";break;default:t="",n="录音"}return{oralIcon:t,oralHint:n}},C=function(e){function t(e){s()(this,t);var n=l()(this,(t.__proto__||r()(t)).call(this,e));return n.countDown=function(e){if(1!==e)return clearInterval(n.timeout),void(0!==e&&3!==e||n.setState({recordTime:0}));n.timeout=setInterval(function(){n.state.recordTime>=180&&n.saveHandler(),n.setState({recordTime:++n.state.recordTime})},1e3)},n.state={oralState:0,listenTest:!1,recordTime:0},n.soundHandler=n.soundHandler.bind(n),n.recordHandler=n.recordHandler.bind(n),n.deleteHandler=n.deleteHandler.bind(n),n.saveHandler=n.saveHandler.bind(n),n.setOralStatus=n.setOralStatus.bind(n),n.audition=document.createElement("audio"),n.timeout=null,n}return p()(t,e),u()(t,[{key:"componentDidMount",value:function(){var e=this;this.audition.onended=function(){e.setState({listenTest:!1})},this.audition.onpause=function(){e.setState({listenTest:!1})}}},{key:"componentWillUnmount",value:function(){this.audition=null,this.existAudio=null,S=null,_=null,clearInterval(this.timeout),this.timeout=null}},{key:"soundHandler",value:function(){if(this.state.listenTest)this.audition.pause(),this.setState({listenTest:!1});else if(_.length>0){var e=new Blob(_,{type:"audio/mp3; codecs=opus"}),t=window.URL.createObjectURL(e);this.audition.src=t,this.audition.play(),this.setState({listenTest:!0})}}},{key:"deleteHandler",value:function(){var e=this.props.saveOrDelAudio;this.audition.pause(),"inactive"!==S.state&&S.stop(),this.setOralStatus(0),e(!1)}},{key:"saveHandler",value:function(){var e=this.props.saveOrDelAudio;this.audition.pause(),"inactive"!==S.state&&S.stop(),this.setOralStatus(3);var t=new Blob(_,{type:"audio/mp3"}),n=new FileReader;n.onload=function(t){e(!0,t.target.result)},n.readAsDataURL(t)}},{key:"recordHandler",value:function(){this.audition.pause();var e=this.state.oralState;0===e||3===e?(this.setOralStatus(1),_=[],S?S.start():q()):1===e?(S.pause(),this.setOralStatus(2)):(S.resume(),this.setOralStatus(1))}},{key:"setOralStatus",value:function(e){this.setState({oralState:e}),(0,this.props.setRecording)(e),this.countDown(e)}},{key:"render",value:function(){var e=this.state,t=e.oralState,n=e.listenTest,a=(e.txtToast,e.recordTime),r=(e.time,x(t)),i=r.oralIcon,s=r.oralHint;return v.a.createElement(I,{className:b.a.oralBtnGroup},t<2?v.a.createElement(f.a,{icon:"sound",onClick:this.soundHandler,disabled:!0}):v.a.createElement(f.a,{icon:n?"pause-circle-o":"sound",onClick:this.soundHandler}),v.a.createElement(f.a,{icon:i,onClick:this.recordHandler},a?s+" "+a+"秒":s),v.a.createElement(f.a,{icon:"close-circle",type:"danger",onClick:this.deleteHandler,disabled:0===t}),v.a.createElement(f.a,{icon:"check-circle-o",type:"primary",onClick:this.saveHandler,disabled:2!==t},"完成录音"))}}]),t}(v.a.Component);C.propTypes={saveOrDelAudio:g.a.func.isRequired,setRecording:g.a.func.isRequired}},532:function(e,t,n){"use strict";function a(e){return{items:e.menu.items}}function r(e){return{getAllMenu:n.i(P.d)(N.a,e),updateNavPath:n.i(P.d)(N.b,e)}}var i=n(235),s=(n.n(i),n(32)),o=n.n(s),u=n(15),c=n.n(u),l=n(3),d=n.n(l),p=n(6),m=n.n(p),h=n(5),f=n.n(h),y=n(4),v=n.n(y),k=n(106),g=(n.n(k),n(105)),E=n.n(g),b=n(445),I=(n.n(b),n(239)),w=n.n(I),_=n(0),S=n.n(_),q=n(1),x=n.n(q),C=n(1061),P=n(51),T=n(57),R=n(31),N=n(515),H=n(703),z=n.n(H),A=w.a.SubMenu,Q={items:[]},D={items:x.a.array,history:x.a.object.isRequired,getAllMenu:x.a.func.isRequired,updateNavPath:x.a.func.isRequired},O=E.a.Sider,M=function(e,t){return n.i(C.a)(e,{path:t.location.pathname,exact:!0,strict:!1})},L=function(e){function t(){var e,n,a,r;d()(this,t);for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return n=a=f()(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(s))),a.state={openKey:"sub1",activeKey:"menu101",collapsed:!1,mode:"inline"},a.toggle=function(){a.setState({collapsed:!a.state.collapsed,mode:a.state.collapsed?"inline":"vertical"})},a.menuClickHandle=function(e){a.setState({activeKey:e.key}),a.props.updateNavPath(e.keyPath,e.key)},r=n,f()(a,r)}return v()(t,e),m()(t,[{key:"componentDidMount",value:function(){this.props.getAllMenu()}},{key:"componentWillReceiveProps",value:function(e){var t=this;Array.isArray(e.items)&&e.items.map(function(e){Array.isArray(e.child)&&e.child.map(function(n){n.url&&M(n.url,t.props.history)?t.menuClickHandle({key:"menu"+n.key,keyPath:["menu"+n.key,"sub"+e.key]}):n.url&&"/homework/correct/filter"===n.url&&t.props.history.location.pathname.startsWith("/pick/homework")&&t.menuClickHandle({key:"menu"+n.key,keyPath:["menu"+n.key,"sub"+e.key]})})})}},{key:"render",value:function(){var e=this.props,t=e.items,n=e.history,a=this.state,r=a.activeKey,i=a.openKey,s=function e(t,a){return Array.isArray(t)&&t.map(function(t){var s=e(t.child,t.key);return t.url&&M(t.url,n)&&(r="menu"+t.key,i="sub"+a),s.length>0?S.a.createElement(A,{key:"sub"+t.key,title:S.a.createElement("span",null,S.a.createElement(o.a,{type:t.icon}),S.a.createElement("span",{className:"nav-text"},t.name))},s):S.a.createElement(w.a.Item,{key:"menu"+t.key},t.url?S.a.createElement(R.c,{to:t.url},t.icon&&S.a.createElement(o.a,{type:t.icon}),t.name):S.a.createElement("span",null,t.icon&&S.a.createElement(o.a,{type:t.icon}),t.name))})}(t);return S.a.createElement(O,{trigger:null,collapsible:!0,collapsed:this.state.collapsed,onCollapse:this.onCollapse},S.a.createElement("div",{className:z.a["ant-layout-logo"]}),S.a.createElement(w.a,{mode:this.state.mode,theme:"dark",selectedKeys:[r],defaultOpenKeys:[i],onClick:this.menuClickHandle},s),S.a.createElement("div",{className:z.a["sider-trigger"]},S.a.createElement(o.a,{className:"trigger",type:this.state.collapsed?"menu-unfold":"menu-fold",onClick:this.toggle})))}}]),t}(S.a.Component);L.propTypes=D,L.defaultProps=Q,t.a=n.i(C.b)(n.i(T.connect)(a,r)(L))},533:function(e,t,n){"use strict";n.d(t,"a",function(){return v});var a=n(15),r=n.n(a),i=n(3),s=n.n(i),o=n(6),u=n.n(o),c=n(5),l=n.n(c),d=n(4),p=n.n(d),m=n(0),h=n.n(m),f=n(704),y=n.n(f),v=function(e){function t(e){s()(this,t);var n=l()(this,(t.__proto__||r()(t)).call(this,e));return n.state={hide:!1},n}return p()(t,e),u()(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.setState({hide:!0})},3e3)}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.txt!==e.txt&&(this.setState({hide:!1}),setTimeout(function(){t.setState({hide:!0})},3e3))}},{key:"render",value:function(){var e=this.props.txt;return!this.state.hide&&h.a.createElement("div",{className:y.a.container},e)}}]),t}(h.a.Component)},534:function(e,t,n){"use strict";n.d(t,"a",function(){return f});var a=n(15),r=n.n(a),i=n(3),s=n.n(i),o=n(6),u=n.n(o),c=n(5),l=n.n(c),d=n(4),p=n.n(d),m=n(0),h=n.n(m),f=function(e){function t(){return s()(this,t),l()(this,(t.__proto__||r()(t)).apply(this,arguments))}return p()(t,e),u()(t,[{key:"render",value:function(){return h.a.createElement("div",null,h.a.createElement("h2",null,"布置作业"))}}]),t}(h.a.Component)},535:function(e,t,n){"use strict";function a(e){return{FetchCourses:n.i(G.d)(Y.c,e),FetchHomeworkList:n.i(G.d)(Y.d,e),FetchBookQuestions:n.i(G.d)(Y.e,e),FetchHomeworkPreview:n.i(G.d)(Y.b,e)}}var r=n(231),i=(n.n(r),n(230)),s=n.n(i),o=n(68),u=n.n(o),c=n(104),l=(n.n(c),n(238)),d=n.n(l),p=n(245),m=(n.n(p),n(244)),h=n.n(m),f=n(45),y=(n.n(f),n(44)),v=n.n(y),k=n(437),g=(n.n(k),n(436)),E=n.n(g),b=n(59),I=(n.n(b),n(58)),w=n.n(I),_=n(243),S=(n.n(_),n(142)),q=n.n(S),x=n(2),C=n.n(x),P=n(15),T=n.n(P),R=n(3),N=n.n(R),H=n(6),z=n.n(H),A=n(5),Q=n.n(A),D=n(4),O=n.n(D),M=n(0),L=n.n(M),F=n(1),j=n.n(F),U=n(355),B=n.n(U),W=n(31),G=n(51),K=n(57),J=n(75),V=n.n(J),Z=n(709),X=n.n(Z),Y=n(82),$=n(282),ee=function(e){function t(e){N()(this,t);var n=Q()(this,(t.__proto__||T()(t)).call(this,e));return n.state={filterParams:n.props.filterParams||{},pagination:{showQuickJumper:!0,current:1,pageSize:10,total:100}},B()(n),n}return O()(t,e),z()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.location,n=e.preview,a=e.FetchHomeworkList,r=e.FetchHomeworkPreview,i=e.filterParams;if(this.props.FetchCourses(),i){var s=i;s.course&&(a(s.course),r(s)),this.state.pagination.current=parseInt(s.pageNumber,10)||1,this.setState(C()({},this.state,{filterParams:s}))}if(t.search&&n){var o=V.a.parse(t.search);o.course&&(a(o.course),r(o)),this.state.pagination.current=parseInt(o.pageNumber,10)||1,this.setState(C()({},this.state,{filterParams:o}))}}},{key:"componentWillReceiveProps",value:function(e,t){this.setState({pagination:C()({},t.pagination,{total:e.preview.total})})}},{key:"onCourseSelectChange",value:function(e){var t=this.props.FetchHomeworkList;this.updateParams("course",e),t(e)}},{key:"updateParams",value:function(e,t){var n=this.props,a=n.history,r=n.FetchBookQuestions,i=n.FetchHomeworkPreview,s=this.state.filterParams,o=!1;if("bookType"===e){var u=t.match(/^(\w+)-/),c=t.match(/-(\d+)$/);if(!u||!c)return console.error("获取到的练习册类型和 id错误");s=C()({},s,{type:u[1],id:c[1]}),o=!0}else if("index"===e){var l=t.split(":");s=C()({},s,{index:l[0],questionId:l[1]}),i(s)}else"end"===e&&(o=!0),s[""+e]=t;this.setState({filterParams:s}),o&&s.end&&s.id&&r(s.end,s.id),a.replace({search:V.a.stringify(s)})}},{key:"handleTableChange",value:function(e){var t=this.props.history,n=C()({},this.state.filterParams,{pageNumber:e.current});this.props.FetchHomeworkPreview(n),this.setState({pagination:e,filterParams:n}),t.replace({search:V.a.stringify(n)})}},{key:"renderBookSelect",value:function(){var e=this,t=this.props,n=t.courses,a=t.homeworks,r=this.state.filterParams;return L.a.createElement(w.a,{type:"flex",justify:"start",align:"middle"},L.a.createElement("label",null,"选择练习册："),L.a.createElement(q.a,{placeholder:"选择课程",className:X.a.select,value:r.course,onChange:this.onCourseSelectChange},n&&n.map(function(e){return L.a.createElement(q.a.Option,{key:""+e.id},e.title)})),L.a.createElement(q.a,{placeholder:"选择练习册",className:X.a.select,typeid:r.type&&r.id?""+r.type+r.id:void 0,onChange:function(t){return e.updateParams("bookType",t)}},a&&a.map(function(e){return L.a.createElement(q.a.Option,{key:e.type+"-"+e.id},e.title)})))}},{key:"renderPageInxSelect",value:function(){var e=this,t=this.props.questions,n=this.state.filterParams;return L.a.createElement(w.a,{type:"flex",align:"middle",className:X.a.mgt15},L.a.createElement("label",null,"要批改的页码："),L.a.createElement(E.a,{placeholder:"起始页码",className:X.a.input,value:n.start,onChange:function(t){return e.updateParams("start",t)}}),L.a.createElement("span",null," 页  至 "),L.a.createElement(E.a,{placeholder:"结束页码",className:X.a.input,value:n.end,onChange:function(t){return e.updateParams("end",t)}}),L.a.createElement("span",null," 页"),L.a.createElement(q.a,{placeholder:"截止到第几题",className:X.a.select,value:n.index&&n.questionId?n.index+":"+n.questionId:void 0,onChange:function(t){return e.updateParams("index",t)}},L.a.createElement(q.a.Option,{value:"0:0",key:0},0,":",0),t?t.map(function(e,t){return L.a.createElement(q.a.Option,{value:t+1+":"+e.id,key:t+1+":"+e.id},t+1,":",e.id)}):null))}},{key:"renderOp",value:function(e,t,n){return L.a.createElement(v.a,{className:X.a.submitBtn},L.a.createElement(W.c,{to:{pathname:"/pick/homework/0",search:V.a.stringify(C()({},this.state.filterParams,{studentId:t.userId,inx:n}))},className:X.a.submitLink},0===t.manualQStatus.uncorrected?"修改批改":"批改"))}},{key:"renderResult",value:function(){var e=this.props.preview;if(!e)return null;var t=[{title:"UserId",dataIndex:"userId",key:"userId"},{title:"题目状态",dataIndex:"status",key:"status",render:function(e){return L.a.createElement("p",null,e)}},{title:"自动批改",dataIndex:"autoQStatus",key:"autoQStatus",render:function(e){return L.a.createElement("p",null,e.correct,"|",e.wrong,"|",e.miss)}},{title:"人工批改",dataIndex:"manualQStatus",key:"manualQStatus",render:function(e){return L.a.createElement("p",null,e.corrected,"|",e.uncorrected,"|",e.avgScore)}},{title:"提交时间",dataIndex:"submitTime",key:"submitTime",render:function(e){return L.a.createElement("p",null,$(new Date(e),"yyyy/mm/dd, HH:MM:ss"))}},{title:"批改时间",dataIndex:"correctTime",key:"correctTime",render:function(e){return L.a.createElement("p",null,$(new Date(e),"yyyy/mm/dd, HH:MM:ss"))}},{title:"批改人",dataIndex:"editor",key:"editor"},{title:"操作",render:this.renderOp}];return L.a.createElement("div",{className:X.a.result},L.a.createElement("h4",null,"您将批改",e.title),L.a.createElement("span",null,"共",e.total,"份作业"),L.a.createElement("span",null,"已经批改：",e.corrected,"份"),L.a.createElement("span",null,"未批改：",e.uncorrected,"份"),L.a.createElement(h.a,{columns:t,rowKey:function(e){return e.userId},dataSource:e.list,pagination:this.state.pagination,onChange:this.handleTableChange}))}},{key:"renderPreview",value:function(){(0,this.props.FetchHomeworkPreview)(this.state.filterParams)}},{key:"render",value:function(){var e=this,t=this.props.preview;return L.a.createElement("div",null,L.a.createElement(w.a,{className:X.a.title},"请选择您本次要批改的作业"),L.a.createElement("div",{className:X.a.box},this.renderBookSelect(),this.renderPageInxSelect(),L.a.createElement(w.a,{type:"flex",align:"middle",className:X.a.mgt15},L.a.createElement("label",null,"学生账号："),L.a.createElement(d.a,{placeholder:"输入学生账号",onChange:function(t){return e.updateParams("studentId",t.target.value)},className:X.a.input+" "+X.a.mgl15}),L.a.createElement(v.a,{type:"primary",onClick:this.renderPreview,className:X.a.mgl15},"查询")),this.renderResult(),L.a.createElement(v.a,{type:"primary",size:"large",disabled:0===u()(t).length,className:X.a.submitBtn},L.a.createElement(W.c,{to:{pathname:"/pick/homework/0",search:V.a.stringify(this.state.filterParams)},className:X.a.submitLink},"开始批改"))))}}]),t}(L.a.Component);ee.propTypes={location:j.a.object.isRequired,courses:j.a.array,homeworks:j.a.array,questions:j.a.array,preview:j.a.object,history:j.a.object.isRequired,filterParams:j.a.object.isRequired,FetchCourses:j.a.func.isRequired,FetchHomeworkList:j.a.func.isRequired,FetchBookQuestions:j.a.func.isRequired,FetchHomeworkPreview:j.a.func.isRequired},ee.defaultProps={courses:[],homeworks:[],questions:[],preview:{}};var te=function(e){var t=e.filter;return{courses:t.courses,homeworks:t.homeworks,questions:t.questions,preview:t.preview,filterParams:t.filterParams}};t.a=n.i(W.b)(n.i(K.connect)(te,a)(s.a.create()(ee)))},536:function(e,t,n){"use strict";n.d(t,"a",function(){return E});var a=n(15),r=n.n(a),i=n(3),s=n.n(i),o=n(6),u=n.n(o),c=n(5),l=n.n(c),d=n(4),p=n.n(d),m=n(0),h=n.n(m),f=n(1),y=n.n(f),v=n(31),k=n(710),g=n.n(k),E=function(e){function t(){return s()(this,t),l()(this,(t.__proto__||r()(t)).apply(this,arguments))}return p()(t,e),u()(t,[{key:"render",value:function(){var e=this.props.match;return h.a.createElement("div",{className:g.a.test},h.a.createElement(v.f,{to:"/homework/correct/filter"}),h.a.createElement("h2",null,"作业批改首页"),h.a.createElement(v.c,{className:g.a.link,to:e.path+"filter"},e.path+"filter"),h.a.createElement(v.c,{className:g.a.link,to:e.path+"questions"},e.path+"questions"))}}]),t}(h.a.Component);E.propTypes={match:y.a.object.isRequired}},537:function(e,t,n){"use strict";function a(e){return n.i(P.d)(Q,e)}var r=n(421),i=(n.n(r),n(420)),s=n.n(i),o=n(2),u=n.n(o),c=n(45),l=(n.n(c),n(44)),d=n.n(l),p=n(59),m=(n.n(p),n(58)),h=n.n(m),f=n(15),y=n.n(f),v=n(3),k=n.n(v),g=n(6),E=n.n(g),b=n(5),I=n.n(b),w=n(4),_=n.n(w),S=n(0),q=n.n(S),x=n(1),C=n.n(x),P=n(51),T=n(57),R=n(31),N=n(75),H=n.n(N),z=n(524),A=n(521),Q=n(517),D=n(711),O=n.n(D),M=function(e){function t(){k()(this,t);var e=I()(this,(t.__proto__||y()(t)).call(this));return e.goBackOrNextQuestion=e.goBackOrNextQuestion.bind(e),e.save=e.save.bind(e),e.renderSummary=e.renderSummary.bind(e),e.next=e.next.bind(e),e.getTitle=e.getTitle.bind(e),e}return _()(t,e),E()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.location,n=e.fetchQuestions,a=e.filterFetchHomeworkPreview;this.querystring=t.search,n(this.querystring),this.querystringData=H.a.parse(this.querystring);var r=this.querystringData;r.pageNumber=parseInt(r.pageNumber,10)||1,10===parseInt(r.inx,10)&&(r.pageNumber+=1),delete r.studentId,a(r)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.location,a=t.fetchQuestions,r=e.location;this.querystring=r.search,r.search&&n.search!==r.search&&a(r.search)}},{key:"getTitle",value:function(e){var t=e.title;if("completion"!==e.type)return t;var n=/\?_(\d+)_\?/g;return t.replace(n,function(t,n){return'<img src="'+e.imgAnswers[n-1]+'" alt="" style="border-bottom: 1px solid #ccc"/>'})}},{key:"save",value:function(){var e=this.props,t=e.questions;(0,e.saveHomeworkCorrect)({homeWork:t.homeWork,userId:t.userId})}},{key:"next",value:function(e){var t=this.props,n=t.history,a=t.questions,r=parseInt(this.querystringData.inx,10);if(r+10*this.querystringData.pageNumber>=a.preview.total)return alert("已经是最后一份作业"),!1;this.querystringData.inx=10===r?1:r+1,this.querystringData.studentId=a.preview.list[this.querystringData.inx-1].userId,n.push({pathname:e||"/homework/correct/questions",search:H.a.stringify(this.querystringData)})}},{key:"goBackOrNextQuestion",value:function(e){var t=this.props,n=t.match,a=t.questions,r=t.history,i=void 0,s=parseInt(n.params.curId,10)+1;e&&s<=a.manualQuestions.length?(i=n.url.replace(/\d+(\/remark)?$/,s),r.replace({pathname:i,search:this.querystring})):(i=n.url.replace(/\d+(\/remark)?$/,"1"),this.next(i))}},{key:"renderSummary",value:function(){var e=this.props,t=e.questions,n=e.history;return q.a.createElement(h.a,{type:"flex",align:"middle",justify:"space-between",className:O.a.title},q.a.createElement("div",{className:O.a.summary},q.a.createElement("h4",null,"学生：",t.userId),q.a.createElement(h.a,null,q.a.createElement("span",null,"提交时间：",new Date(t.submitTime).toLocaleString()),q.a.createElement("span",null,"自动批改题目：",t.autoQuestions.length))),q.a.createElement(d.a,{type:"保存并退出",size:"large",onClick:function(){return n.goBack()}},"返回到筛选页面"))}},{key:"renderCorrectPanel",value:function(){var e=this,t=this.props,n=t.match,a=t.questions,r=t.submitCorrect,i=t.history,s=a.manualQuestions[n.params.curId-1],o=s&&s.questionId;if(n.params.curId&&0!==a.manualQuestions.length&&s&&o){var c=u()({},s,{title:a.questionMap[o].content.description,type:a.questionMap[o].pattern.desc,answer:a.questionMap[o].answer});return q.a.createElement(A.a,{back:function(){return e.goBackOrNextQuestion()},next:function(){return e.goBackOrNextQuestion(!0)},history:i,submit:function(e,t,i){return r({index:n.params.curId,homeWork:a.homeWork,userId:a.userId,questionId:o,score:e,mark:{images:[t]}},i)},question:c,score:"remark"===n.params.status?s.score:0,imageUrl:"remark"===n.params.status?s.mark.images[0]:s.imgAnswers[0]})}return null}},{key:"renderWarning",value:function(){var e=this,t=this.props,n=t.history,a=t.questions;return q.a.createElement("div",{className:O.a.box},q.a.createElement(s.a,{message:a.description,type:"warning",showIcon:!0}),q.a.createElement(h.a,{type:"flex",justify:"center",align:"middle"},q.a.createElement(d.a,{type:"primary",className:O.a.btn,onClick:function(){e.next()}},"进入下一份"),q.a.createElement(d.a,{type:"primary",size:"large",className:O.a.btn,onClick:function(){n.goBack()}},"退出")))}},{key:"render",value:function(){var e=this,t=this.props,n=t.match,a=t.history,r=t.questions;t.fetchQuestions;return 0!==r.code&&r.description?this.renderWarning():q.a.createElement("div",null,this.renderSummary(),this.renderCorrectPanel(),q.a.createElement("div",{className:O.a.box},r.manualQuestions.map(function(t){return t=u()({},t,{title:r.questionMap[t.questionId].content.description,type:r.questionMap[t.questionId].pattern.desc}),q.a.createElement(z.a,{key:t.questionId,urlPrefix:n.url,querystring:e.querystring,history:a,title:e.getTitle(t),question:t})})),q.a.createElement(h.a,{type:"flex",justify:"center",align:"middle"},q.a.createElement(d.a,{type:"primary",className:O.a.btn,onClick:function(){e.save(),e.next()}},"保存并进入下一份"),q.a.createElement(d.a,{type:"primary",size:"large",className:O.a.btn,onClick:function(){e.save(),a.goBack()}},"保存并退出")))}}]),t}(q.a.Component);M.propTypes={questions:C.a.object.isRequired,match:C.a.object.isRequired,history:C.a.object.isRequired,submitCorrect:C.a.func.isRequired,fetchQuestions:C.a.func.isRequired,saveHomeworkCorrect:C.a.func.isRequired};var L=function(e){return{questions:e.questions}};t.a=n.i(R.b)(n.i(T.connect)(L,a)(M))},538:function(e,t,n){"use strict";n.d(t,"a",function(){return y});var a=n(15),r=n.n(a),i=n(3),s=n.n(i),o=n(6),u=n.n(o),c=n(5),l=n.n(c),d=n(4),p=n.n(d),m=n(0),h=n.n(m),f=n(31),y=function(e){function t(){return s()(this,t),l()(this,(t.__proto__||r()(t)).apply(this,arguments))}return p()(t,e),u()(t,[{key:"render",value:function(){return h.a.createElement("div",null,h.a.createElement("h2",null,"作业首页"),h.a.createElement(f.f,{to:"/homework/correct/"}))}}]),t}(h.a.Component)},539:function(e,t,n){"use strict";function a(e){return n.i(O.d)(B,e)}var r=n(245),i=(n.n(r),n(244)),s=n.n(i),o=n(45),u=(n.n(o),n(44)),c=n.n(u),l=n(235),d=(n.n(l),n(32)),p=n.n(d),m=n(2),h=n.n(m),f=n(15),y=n.n(f),v=n(3),k=n.n(v),g=n(6),E=n.n(g),b=n(5),I=n.n(b),w=n(4),_=n.n(w),S=n(104),q=(n.n(S),n(238)),x=n.n(q),C=n(231),P=(n.n(C),n(230)),T=n.n(P),R=n(0),N=n.n(R),H=n(1),z=n.n(H),A=n(355),Q=n.n(A),D=n(31),O=n(51),M=n(57),L=n(75),F=n.n(L),j=n(712),U=n.n(j),B=n(252),W=(T.a.Item,x.a.Search),G=n(282),K=function(e){function t(e){k()(this,t);var n=I()(this,(t.__proto__||y()(t)).call(this,e));return n.state={searchParams:{keyword:"",page:1,size:10},pagination:{showQuickJumper:!0,current:1,pageSize:10,total:10}},Q()(n),n}return _()(t,e),E()(t,[{key:"componentDidMount",value:function(){var e=this.props.match;this.initData(e.params,this.props)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.match,a=t.location,r=e.match,i=e.quizzes,s=e.studentQuizzes,o=e.type,u=e.location,c=F.a.parse(u.search),l="all"===o?i.total:s.total;this.setState({pagination:h()({},this.state.pagination,{total:l,current:parseInt(c.page,10)||1})}),n.params.id===r.params.id&&a.search===u.search||this.initData(r.params,e,c.page)}},{key:"onChangeSearch",value:function(e){this.setState({searchParams:h()({},this.state.searchParams,{keyword:e.target.value})})}},{key:"initData",value:function(e,t){var n=t.location,a=t.fetchQuizzes,r=t.fetchQuizzesForStudent,i=F.a.parse(n.search),s=h()({},this.state.searchParams,{keyword:i.search,page:i.page||1});this.setState({searchParams:s}),e.id?(delete s.keyword,s.quizId=e.id,s.lessonId=e.lessonId,r(s)):a(s)}},{key:"historyPush",value:function(e){var t=this.props,n=t.history,a=t.location,r=F.a.parse(a.search);n.push({search:F.a.stringify(h()({},r,e))})}},{key:"handleTableChange",value:function(e){this.historyPush({page:e.current})}},{key:"searchHandle",value:function(e){this.historyPush({search:e,page:1})}},{key:"goStudentQuiz",value:function(e,t){this.props.history.push({pathname:"/homework/quiz/list/"+e+"/"+t})}},{key:"readAll",value:function(e,t){var n=e.quizId,a=e.lessonId;(0,this.props.fetchQuizzesReadAll)({quizId:n,lessonId:a},t)}},{key:"goPick",value:function(e,t){var n=this.props.history,a=this.state.pagination,r={quizId:e.quizId,lessonId:e.lessonId,userId:e.userId,username:e.username,submitTime:e.submitTime,page:a.current,inx:t};n.push({pathname:"/pick/quiz/0",search:F.a.stringify(r)})}},{key:"renderSearch",value:function(){var e=this;if("all"!==this.props.type)return null;var t=this.state.searchParams.keyword,n=t?N.a.createElement(p.a,{type:"close-circle",onClick:function(){return e.searchHandle("")}}):null;return N.a.createElement("div",{className:U.a.top},N.a.createElement(W,{defaultValue:t,value:t,placeholder:"搜索测试名称或ID",style:{width:200},onChange:this.onChangeSearch,onSearch:function(t){return e.searchHandle(t)},suffix:n}))}},{key:"renderBtn",value:function(e,t,n){var a=this;return N.a.createElement("div",null,N.a.createElement(c.a,{size:"small",type:"primary",onClick:function(){return a.goStudentQuiz(t.quizId,t.lessonId)}},"查看"),N.a.createElement("br",null),N.a.createElement(c.a,{size:"small",className:U.a.mt5,disabled:"全批完"===t.correctState,onClick:function(){return a.readAll(t,n)}},"已阅"))}},{key:"renderBtnPick",value:function(e,t,n){var a=this;return N.a.createElement("div",null,N.a.createElement(c.a,{size:"small",onClick:function(){return a.goPick(t,n)},disabled:0===t.code},"批改"))}},{key:"renderQuiz",value:function(){var e=this.props.quizzes;if(!e.total||0===e.total)return null;var t=[{title:"测试ID",dataIndex:"quizId",key:"quizId"},{title:"课程ID",dataIndex:"lessonId",key:"lessonId"},{title:"测试名称",dataIndex:"title",key:"title"},{title:"测试类型",dataIndex:"pattern",key:"pattern"},{title:"测试创建时间",dataIndex:"createTime",key:"createTime",render:function(e){return N.a.createElement("p",null,G(new Date(e),"yyyy/mm/dd, HH:MM:ss"))}},{title:"测试提交数量",dataIndex:"submitNumber",key:"submitNumber"},{title:"测试批改状态",dataIndex:"correctState",key:"correctState"},{title:"操作",render:this.renderBtn}];return N.a.createElement("div",{className:U.a.result},N.a.createElement("div",{className:U.a.topBar},"最近测试",N.a.createElement("span",null,"共",N.a.createElement("strong",null," ",e.total," "),"份作业")),N.a.createElement(s.a,{columns:t,rowKey:function(e){return e.id},dataSource:e.list,pagination:this.state.pagination,onChange:this.handleTableChange}))}},{key:"renderStudentQuiz",value:function(){var e=this.props.studentQuizzes;if(!e)return null;var t=[{title:"学员ID",dataIndex:"userId",key:"userId"},{title:"用户昵称",dataIndex:"username",key:"username"},{title:"提交时间",dataIndex:"submitTime",key:"submitTime",render:function(e){return N.a.createElement("p",null,G(new Date(e),"yyyy/mm/dd, HH:MM:ss"))}},{title:"批改状态",dataIndex:"correctState",key:"correctState"},{title:"批改人",dataIndex:"editor",key:"editor"},{title:"操作",render:this.renderBtnPick}];return N.a.createElement("div",{className:U.a.result},N.a.createElement("div",{className:U.a.topBar},N.a.createElement("span",null,"本次测试共",N.a.createElement("strong",null," ",e.total," "),"份")),N.a.createElement(s.a,{columns:t,rowKey:function(e){return e.id},dataSource:e.list,pagination:this.state.pagination,onChange:this.handleTableChange}))}},{key:"render",value:function(){var e=this.props.type;return N.a.createElement("div",{className:U.a.container},this.renderSearch(),"all"===e?this.renderQuiz():this.renderStudentQuiz())}}]),t}(N.a.Component);K.propTypes={location:z.a.object.isRequired,history:z.a.object.isRequired,fetchQuizzes:z.a.func.isRequired,quizzes:z.a.object.isRequired,studentQuizzes:z.a.object.isRequired,type:z.a.string,match:z.a.object.isRequired,fetchQuizzesReadAll:z.a.func.isRequired},K.defaultProps={type:"all"};var J=function(e){var t=e.quiz;return{quizzes:t.quizzes,studentQuizzes:t.studentQuizzes,type:t.type}};t.a=n.i(D.b)(n.i(M.connect)(J,a)(K))},540:function(e,t,n){"use strict";n.d(t,"a",function(){return f});var a=n(15),r=n.n(a),i=n(3),s=n.n(i),o=n(6),u=n.n(o),c=n(5),l=n.n(c),d=n(4),p=n.n(d),m=n(0),h=n.n(m),f=function(e){function t(){return s()(this,t),l()(this,(t.__proto__||r()(t)).apply(this,arguments))}return p()(t,e),u()(t,[{key:"render",value:function(){return h.a.createElement("div",null,h.a.createElement("h2",null,"作业统计"))}}]),t}(h.a.Component)},541:function(e,t,n){"use strict";n.d(t,"a",function(){return f});var a=n(15),r=n.n(a),i=n(3),s=n.n(i),o=n(6),u=n.n(o),c=n(5),l=n.n(c),d=n(4),p=n.n(d),m=n(0),h=n.n(m),f=function(e){function t(){return s()(this,t),l()(this,(t.__proto__||r()(t)).apply(this,arguments))}return p()(t,e),u()(t,[{key:"render",value:function(){return h.a.createElement("div",null,h.a.createElement("h2",null,"首页"))}}]),t}(h.a.Component)},542:function(e,t,n){"use strict";function a(e){return n.i(S.d)(i()({},N,{SetFilterParams:n.i(S.d)(H.a,e)}),e)}var r=n(2),i=n.n(r),s=n(107),o=n.n(s),u=n(15),c=n.n(u),l=n(3),d=n.n(l),p=n(6),m=n.n(p),h=n(5),f=n.n(h),y=n(4),v=n.n(y),k=n(465),g=(n.n(k),n(464)),E=n.n(g),b=n(0),I=n.n(b),w=n(1),_=n.n(w),S=n(51),q=n(57),x=n(31),C=n(75),P=n.n(C),T=n(523),R=n(522),N=n(516),H=n(82),z=n(713),A=n.n(z),Q=n(533),D=E.a.TabPane,O=function(e){function t(e){d()(this,t);var n=f()(this,(t.__proto__||c()(t)).call(this,e));return n.getNextInx=function(e,t){for(var a=e+1;a<t.length;){if(t[a].score<(n.isHomeWork?0:-1))return a;a+=1}return a},n.setScrollTop=function(e,t){var a=n.refs["currTab"+t+"_"+e];if(a){var r=a.parentNode.scrollTop,i=a.offsetTop-50,s=(i-r)/10,o=null,u=function(){var e=r+s;e<i?(a.parentNode.scrollTop=e,r=e):(a.parentNode.scrollTop=i,clearInterval(o))};o=setInterval(u,10)}},n.changeTabs=function(e){var t=n.props.match,a=parseInt(t.params.curInx,10);setTimeout(function(){return n.setScrollTop(a,e)},100)},n.state={curPicInx:0,txtToast:null},n.changeInx=n.changeInx.bind(n),n.goBackOrNextQuestion=n.goBackOrNextQuestion.bind(n),n}return v()(t,e),m()(t,[{key:"componentDidMount",value:function(){this.initData(this.props)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.match,a=t.location,r=e.match,i=e.location;a.search!==i.search&&this.initData(e),n.params.curInx!==r.params.curInx&&this.setState({curPicInx:0})}},{key:"initData",value:function(e){var t=e.location,n=e.fetchQuizPreview,a=e.fetchQuestions,r=e.fetchQuizzesForStudent,i=e.filterFetchHomeworkPreview,s=e.match,u=s.params.type;this.isHomeWork="homework"===u,this.querystring=P.a.parse(t.search)||{};var c=this.querystring,l=c.quizId,d=c.inx,p=c.pageNumber,m=c.lessonId,h=this.querystring.page,f=parseInt(p,10)||1;if(9===parseInt(d,10)&&(h=parseInt(h,10)+1,this.querystring.pageNumber=f+1),"quiz"===u)n(this.querystring),r({quizId:l,page:h,lessonId:m});else if("homework"===u){var y=o()({},this.querystring);a(t.search),delete y.studentId,i(y)}}},{key:"changeInx",value:function(e){e!==this.state.curPicInx&&this.setState({curPicInx:e})}},{key:"goBackOrNextQuestion",value:function(){var e=this,t=this.props,n=t.match,a=t.history,r=t.detail,s=t.lists,o=n.params.type,u=parseInt(n.params.curInx,10),c=this.getNextInx(u,r);if(c<r.length)a.replace({pathname:"/pick/"+o+"/"+c,search:P.a.stringify(this.querystring)}),this.setScrollTop(c,0);else if(c===r.length){var l=parseInt(this.querystring.inx,10),d=(l+1)%9;if(d===s.total)return this.setState({txtToast:"全部批改完成"}),void(this.isHomeWork||setTimeout(function(){a.push({pathname:e.isHomeWork?"/homework/quiz/list/"+r[0].quizId:"/homework/quiz/list/"})},3e3));this.isHomeWork?this.querystring.studentId=s.list[d].userId:(this.querystring.userId=s.list[d].userId,delete this.querystring.username),this.setState({txtToast:"下一位学员"}),a.push({pathname:"/pick/"+o+"/0",search:P.a.stringify(i()({},this.querystring,{inx:d}))}),this.setScrollTop(0,0)}}},{key:"renderTabs",value:function(){var e=this,t=[{tabName:"原题"},{tabName:"答案解析"}];return I.a.createElement(E.a,{defaultActiveKey:"0",animated:!1,onChange:this.changeTabs},t.map(function(t,n){return e.renderTabPane(t.tabName,n)}))}},{key:"renderUserInfo",value:function(){if(!this.querystring)return null;var e=this.props.detail,t=this.querystring,n=t.userName,a=t.submitTime;return 0===e.length?I.a.createElement("div",null,"数据获取失败"):I.a.createElement("div",null,I.a.createElement("h3",{className:A.a.title},n||e[0].userId),I.a.createElement("div",null,new Date(parseInt(a||e[0].submitTime,10)).toLocaleString()," 提交"),this.isHomeWork?I.a.createElement("span",null,"自动批改题目：",e.length):null)}},{key:"renderTabPane",value:function(e,t){var n=this,a=this.props,r=a.detail,s=a.match,o=a.location,u=parseInt(s.params.curInx,10);return I.a.createElement(D,{tab:e,key:t,className:A.a.tabpane},r.map(function(a,r){a=i()({},a,{title:a.content});var c=0===t?a.content:a.analyses;return I.a.createElement("div",{ref:"currTab"+t+"_"+r,onClick:function(){return n.setScrollTop(r,t)}},I.a.createElement(T.a,{isActive:u===r,inx:r,key:a.questionId,title:c,location:o,question:a,tabName:e,type:s.params.type}))}))}},{key:"renderCorrectPanel",value:function(){var e=this,t=this.props,n=t.match,a=t.detail,r=t.submitCorrect,s=t.history,o=t.SetFilterParams,u=n.params.curInx,c=this.state.curPicInx;if(0===a.length)return I.a.createElement("div",null,"数据获取失败");var l=a[u],d=l.quizId,p=l.score,m=i()({},l,{status:-2!==p?-1:0,index:u,mark:{images:[],audio:"",text:""}});return this.isHomeWork||(m.homeWork={type:"quiz",id:d}),I.a.createElement(R.a,{next:function(){return e.goBackOrNextQuestion()},SetFilterParams:o,history:s,curPicInx:c,curInx:+u,curUserInx:parseInt(P.a.parse(s.location.search).inx,10),changeInx:this.changeInx,submit:function(e,t,n,a){m.score=e,m.mark.images=t,m.mark.audio=n,r(m,a)},question:l,isHomeWork:this.isHomeWork})}},{key:"render",value:function(){var e=this.props.detail,t=this.state.txtToast;return e?I.a.createElement("div",{className:A.a.layout},this.renderUserInfo(),I.a.createElement("div",null,I.a.createElement("div",{className:A.a.left},this.renderTabs()),I.a.createElement("div",{className:A.a.right},this.renderCorrectPanel())),t?I.a.createElement(Q.a,{txt:t}):null):null}}]),t}(I.a.Component);O.propTypes={match:_.a.object.isRequired,history:_.a.object.isRequired,location:_.a.object.isRequired,lists:_.a.object.isRequired,detail:_.a.array.isRequired,submitCorrect:_.a.func.isRequired,SetFilterParams:_.a.func.isRequired};var M=function(e){var t=e.pick;return{detail:t.detail,lists:t.lists}};t.a=n.i(x.b)(n.i(q.connect)(M,a)(O))},543:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=n.n(a),i=n(12),s=(n.n(i),n(413)),o=(n.n(s),n(412)),u=n(140),c=(n(140).default,n.i(o.a)());n.i(i.render)(r.a.createElement(s.AppContainer,null,r.a.createElement(u.default,{store:c})),document.getElementById("root"))},544:function(e,t,n){"use strict";function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.promiseTypeSuffixes||c;return function(e){var a=e.dispatch;return function(e){return function(r){if(!n.i(u.a)(r.payload))return e(r);var s=r.type,c=r.payload,l=r.meta,d=c.promise,p=c.data,m=(l||{}).promiseTypeSuffixes||t,h=o()(m,3),f=h[0],y=h[1],v=h[2];e(i()({type:s+"_"+f},p?{payload:p}:{},l?{meta:l}:{}));var k=function(e){return e&&(e.meta||e.payload)},g=function(e){return"function"==typeof e},E=function(e){return i()({type:s+"_"+(e?v:y)},l?{meta:l}:{},e?{error:!0}:{})};return r.payload.promise=d.then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=E();return a(g(e)?e.bind(null,t):i()({},t,k(e)?e:i()({},!!e&&{payload:e})))},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=E(!0);return a(g(e)?e.bind(null,t):i()({},t,k(e)?e:i()({},!!e&&{payload:e})))}),r}}}}t.a=a;var r=n(2),i=n.n(r),s=n(147),o=n.n(s),u=n(145),c=["PENDING","FULFILLED","REJECTED"]},545:function(e,t,n){"use strict";function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case s.o:return i()({},e,{user:t.payload.data.userId});default:return e}}t.a=a;var r=n(107),i=n.n(r),s=n(36),o={user:null}},546:function(e,t,n){"use strict";function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case s.h:return i()({},e,{courses:t.payload.data.list});case s.i:return i()({},e,{homeworks:t.payload.data.list});case s.j:return i()({},e,{questions:t.payload.data});case s.d:return i()({},e,{preview:t.payload.data});case s.k:return i()({},e,{preview:{}});case s.l:return i()({},e,{filterParams:t.obj});default:return e}}t.a=a;var r=n(2),i=n.n(r),s=n(36),o={courses:null,questions:null}},547:function(e,t,n){"use strict";function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case u.n:return i()({},c,{items:t.payload.data.menus});case u.k:var n=[],a=void 0,r=void 0,s=void 0;return Array.isArray(t.payload.data)&&t.payload.data.reverse().map(function(t){return-1!==t.indexOf("sub")&&(r=t.replace("sub",""),a=o()(e.items,function(e){return e.key==r}),s=a.child,n.push({key:a.key,name:a.name,url:a.url})),-1!==t.indexOf("menu")&&(r=t.replace("menu",""),s&&(a=o()(s,function(e){return e.key==r}),n.push({key:a.key,name:a.name,url:a.url}))),null}),i()({},e,{currentIndex:1*t.payload.key,navpath:n});default:return e}}t.a=a;var r=n(107),i=n.n(r),s=n(848),o=n.n(s),u=n(36),c={items:[],navpath:[]}},548:function(e,t,n){"use strict";function a(e){if(!e)return[];var t=[];return e.manualQuestions.map(function(n,a){var r=e.questionMap[n.questionId];return t[a]=s()({},n,{content:r.content.description,analyses:r.answer,imgCorrect:n.mark&&n.mark.images,userId:e.userId,submitTime:e.submitTime,homeWork:e.homeWork}),n}),t}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case o.a:return s()({},e,{detail:t.payload.data});case o.b:return s()({},e,{detail:a(t.payload.data),code:t.payload.code,description:t.payload.description});case o.c:case o.d:return s()({},e,{lists:t.payload.data});case o.e:var n=e.detail.map(function(e,n){var a=s()({},e);return n===parseInt(t.payload.inx,10)?(a.score=t.payload.data.score,a.imgCorrect=t.payload.data.mark.images,a.mark||(a.mark={}),a.mark.audio=t.payload.data.mark.audio,a):e});return s()({},e,{detail:n,pickStatus:t.payload.data.status});default:return e}}t.a=r;var i=n(2),s=n.n(i),o=n(36),u={detail:null,studentQuizzes:[]}},549:function(e,t,n){"use strict";function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case s.m:return i()({},e,{autoQuestions:[],manualQuestions:[]});case s.b:return i()({},e,t.payload.data,{code:t.payload.code,description:t.payload.description});case s.e:if(!t.payload.data)return e;var n=e.manualQuestions.slice();return n.splice(t.payload.inx-1,1,i()({},e.manualQuestions[t.payload.inx-1],{score:t.payload.data.score,mark:{images:t.payload.data.mark.images}})),i()({},e,{manualQuestions:n});case s.d:return i()({},e,{preview:t.payload.data});default:return e}}t.a=a;var r=n(2),i=n.n(r),s=n(36),o={autoQuestions:[],manualQuestions:[]}},550:function(e,t,n){"use strict";function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case s.f:return i()({},e,{type:"all",quizzes:t.payload.data});case s.c:return i()({},e,{type:"student",studentQuizzes:t.payload.data});case s.g:var n=e.quizzes.list.map(function(e,n){var a=i()({},e);return n===parseInt(t.payload.inx,10)?(a.correctState="全批完",a):e});return i()({},e,{quizzes:i()({},e.quizzes,{list:n})});default:return e}}t.a=a;var r=n(2),i=n.n(r),s=n(36),o={quizzes:{},studentQuizzes:{}}},551:function(e,t,n){"use strict";var a=n(0),r=n.n(a),i=n(31),s=n(541),o=n(538),u=n(536),c=n(535),l=n(537),d=n(539),p=n(542),m=n(534),h=n(540),f=r.a.createElement(i.d,null,r.a.createElement(i.e,{path:"/",exact:!0,component:s.a}),r.a.createElement(i.e,{path:"/homework/correct/filter",component:c.a}),r.a.createElement(i.e,{path:"/homework/correct/questions/:curId?/:status?",component:l.a}),r.a.createElement(i.e,{path:"/homework/quiz/list/:id?/:lessonId?",component:d.a}),r.a.createElement(i.e,{path:"/pick/:type/:curInx",component:p.a}),r.a.createElement(i.e,{path:"/homework/correct/",component:u.a}),r.a.createElement(i.e,{path:"/homework/assign",component:m.a}),r.a.createElement(i.e,{path:"/homework/stats",component:h.a}),r.a.createElement(i.e,{path:"/homework",component:o.a}));t.a=f},676:function(e,t){},677:function(e,t){},678:function(e,t){},679:function(e,t){},680:function(e,t){},681:function(e,t){},682:function(e,t){},683:function(e,t){},684:function(e,t){},685:function(e,t){},686:function(e,t){},687:function(e,t){},688:function(e,t){},689:function(e,t){},690:function(e,t){},691:function(e,t){},692:function(e,t){},693:function(e,t){},694:function(e,t){},695:function(e,t){},696:function(e,t){e.exports={wrapper:"_2T3K_1H2qT1mO21dlAflEZ",bgMask:"_3wJuBS4p7sSuC8LDjXo_Dl",panel:"_3D6kJhAUUMPP1VbfoVUe1-",containerQue:"_2quxwEwAwGVf26j1h6etNv",title:"VQklQKVJ3PUxcGRXMQZCS",canvasBox:"_1gGTi90MpGPPIXNjvnMhtB"}},697:function(e,t){e.exports={answerImg:"_2CDRAnYonoDEshPm8pqG08",line:"_20yLwPJnAYBQoe1FckqEr6"}},698:function(e,t){e.exports={audio:"_3Dr0LwWqsP-WdZG3pizoqc"}},699:function(e,t){e.exports={oralBtnGroup:"_2cDGw1n4soPCldysDP4Htk",existAudio:"_13kPNoG5zH7FXdWkQvxBQj",hidden:"_36deUM2qZERRRuMPjmwgGa"}},700:function(e,t){},701:function(e,t){e.exports={"ant-layout":"_29vwKM6kGQKbJh_JHhlXW9"}},702:function(e,t){e.exports={container:"PC464oVvO2vzZc1W5C4fq"}},703:function(e,t){e.exports={"ant-layout-logo":"_3LGFQECIM6eBA8bQSxLsNm","sider-trigger":"ZX4QQEypvzaHoA2snOumB","ant-layout-sider-collapsed":"_3TxBrsrCgTvCMAR6lNEr-y"}},704:function(e,t){e.exports={container:"_26Neh8BSUcLXam__EwFDKU"}},705:function(e,t){e.exports={imgBox:"_2LhATwnYwtNQVOhaXUsD4K",imgBoxActive:"_2qarQKezsUPm8iAJiNbPoX",wrapper:"_2Jqs6o-eksBiT6vzi-axXV",containerQue:"_2RgsYQbOTuJD_r7HSocKlH",title:"_3G9Aq5eGXqFSvPdFvS0_ym",canvasBox:"_2h8jfGPpjAzh7vgrwElUt1",canvasItem:"_2ObvwklVIqSUgDRZthy4yf",canvasItemIsActive:"_3hAqft9XMYGf75RClHtoC1"}},706:function(e,t){e.exports={link:"_1V1As2KgmuHaqk4D-2ik-K",item:"_1jD7dPQ-EraZUy9DzrDYbc",itemActive:"_38aC6BNwtl6ureL-DaYy8V"}},707:function(e,t){e.exports={container:"hzGAAsQQ_j7f6ei5TyLeJ",title:"_2Hi8UiPDe9_t91hZkdlV_j"}},708:function(e,t){e.exports={"header-icon":"_2K7oQh3H9v5hRMOswYCkyt",title:"_2gl2iYlRr5SpoUmjYrnGA-"}},709:function(e,t){e.exports={title:"_14vlrdLLEfgTTV2a_dzVUd",box:"_1n67nzaZCRFumOr37LpVse",select:"_27gFK2JEmotNczdh1soCAG",input:"GMKZ0yFayZnZdh17NyiK3",mgt15:"JmMXjAyqns3OSBLlRHoFf",mgl15:"_7rt-pSrdI2CQ8QXVYkmz1",submitLink:"_3AYjEJzFWd801Brk30aNGT",submitBtn:"_3-x8uQPaHdu3QSq6SJVZQQ",result:"_2zoN5Iv_IbR1woxWBT3RG7"}},710:function(e,t){e.exports={link:"_2SenOk56goYvYq7DwwrLcZ",test:"_3Dg1XK-ST-tmImtQSjU7A9"}},711:function(e,t){e.exports={box:"_2joka-g6YGb3IuANJTeYrW",summary:"_2YmeP3ox7iVXVMCY2M1WLp",btn:"_3hM1gzyRBrKcy9fo5pIAHg"}},712:function(e,t){e.exports={top:"uAxZ9AyBo4-ZDfJKjWyvL",container:"_27dmT1NObvnGDc6e5sDW9t",topBar:"_1tdw3JXMsJCG9GfIAAvswf",mt5:"_3Y3HfM-FBs9v4W42DxfegC"}},713:function(e,t){e.exports={layout:"_3dG4SXrAkfuQARrM2olCj",title:"_1Q3DzsjXJE8sABJAmsEmPT",left:"_3agdNTByWKO0X-vOFgKr-A",tabpane:"_6zvS96jwB2WO-ElkuTuJD",right:"_15tDSN3IaZ3DzH0wb0_ck8"}},82:function(e,t,n){"use strict";function a(){return{type:c.p,payload:{promise:n.i(u.a)().then(function(e){return e.data})}}}function r(e){return{type:c.q,payload:{promise:n.i(u.b)(e).then(function(e){return e.data})}}}function i(e,t){return{type:c.r,payload:{promise:n.i(u.c)(e,t).then(function(e){return e.data})}}}function s(e){return{type:c.s,payload:{promise:n.i(u.d)(e).then(function(e){return e.data})}}}function o(e){return{type:c.l,obj:e}}t.c=a,t.d=r,t.e=i,t.b=s,t.a=o;var u=n(83),c=n(36)},83:function(e,t,n){"use strict";function a(){return k.get("/my/info")}function r(){return k.get("/my/courses")}function i(e){return k.get("/homework/list",{params:{courseId:e}})}function s(e,t){return k.get("/book/questions",{params:{page:e,id:t}})}function o(e){return k.get("/homework/preview",{params:e})}function u(e){return k.get("/homework/pick"+e)}function c(e){return k.post("/homework/correct",e)}function l(e){return k.post("/homework/save",e)}function d(e){return k.get("/quiz/list",{params:e})}function p(e){return k.get("/quiz/student",{params:e})}function m(e){return k.post("/quiz/readAll",e)}function h(e){return k.get("/quiz/preview",{params:e})}function f(e){return k.post("/quiz/correct",e)}t.e=a,t.a=r,t.b=i,t.c=s,t.d=o,t.f=u,t.h=c,t.i=l,t.k=d,t.l=p,t.m=m,t.j=h,t.g=f;var y=n(143),v=n.n(y),k=v.a.create({baseURL:"http://ws075x.corp.youdao.com:26681",timeout:5e3,withCredentials:!0})}},[543]);
//# sourceMappingURL=app.638ffb3f118f0d6dfcb9.js.map